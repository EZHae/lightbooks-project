<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${episode.title} + ' - ' + ${episode.novel.title}">회차 상세 보기</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
      .episode-container {
            max-width: 800px;
            margin: 20px auto; 
            padding: 20px calc(20px + 17px) 20px 20px;  
            overflow-y: scroll;
            height: 70vh; 
            background-color: white; 
            box-sizing: border-box; 
 		} 

       .episode-title-main { 
           font-size: 2rem; 
           font-weight: bold; 
           margin-bottom: 0.5rem; 
           text-align: center; 
       } 

       .episode-title-sub { 
           font-size: 1.5rem; 
           font-weight: bold; 
           margin-bottom: 0rem; 
           text-align: center; 
           color: #6c757d; 
       } 

       .episode-stage-sub { 
           font-size: 1.2rem; 
           font-weight: bold; 
           margin-bottom: 1rem; 
           text-align: center; 
           color: #6c757d; 
       } 

       .episode-content { 
           white-space: pre-wrap; 
           word-wrap: break-word; 
           line-height: 1.6; 
           font-family: 'Nanum Gothic', sans-serif; 
       } 
    </style>
</head>
<body>

<div class="container">
    <div class="episode-container">
        <h1 class="episode-title-main" th:text="${episode.novel.title}">소설 제목</h1>
        <h2 class="episode-title-sub" th:text="${episode.episodeNum} + '화'"></h2>
        <h3 class="episode-stage-sub" th:text="${episode.title}"></h3>

        <hr>

        <div class="episode-content" th:utext="${episode.content}"></div>

        <div style="display: flex; justify-content: space-between; margin-top: 20px;">
            <a th:if="${previousEpisodeId != null}"
			   th:href="@{/novel/{novelId}/episode/{id}(novelId=${episode.novel.id}, id=${previousEpisodeId})}"
			   class="btn btn-secondary">이전 화</a>
			
			 <a th:if="${nextEpisodeId != null}"
			    th:href="@{/novel/{novelId}/episode/{id}(novelId=${episode.novel.id}, id=${nextEpisodeId})}"
			    class="btn btn-secondary">다음 화</a>
        </div>
        <!-- TODO : 수정버튼 작성자만 보이게  -->
        <div th:if="${episode.novel.userId eq #authentication.principal.id}">
			<a th:href="@{/novel/{novelId}/episode/{id}/modify(novelId=${episode.novel.id}, id=${episode.id})}">수정</a>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>