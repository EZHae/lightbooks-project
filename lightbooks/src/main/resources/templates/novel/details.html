<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head th:replace="~{/layout/fragments :: htmlHead('insert title')}"></head>
	<style>
	
	
		#btnPating:hover {
			color:white;  
		}
		
		#ratingModal {
			display : none;
			position: fixed;
			left: 100px;
			top: 80px;
			width: 300px;
			height: 400px;
			padding: 20px;
			border-radius: 10px;
			z-index: 1000;
			text-align: center;
		}
		
		.btnLikeWithRating{
			display : flex;
			flex-direction: row;
			flex-wrap: wrap;
			justify-content: space-evenly;
			margin: 0 auto;
		}
		
		
	</style>
	
	<body>
		<th:block th:replace="~{/layout/fragments :: pageHeader}"></th:block>
		
		<main class="card">
			<div class="card-body">
				<div class="row mg-b-25">
					<div class="col-4 card" th:object="${novel}">
						<img th:src="@{/images/testimg.jpg}" style="width: 90%">
						
						
		
						<div>
							<label class="form-label" for="title">작품명</label>
							<input type="text" name="title" class="form-control" th:value="*{title}" readonly>
						</div>
						<div class="">
							<label class="form-label" for="writer">작성자</label>
							<input type="text" name="writer" class="form-control" th:value="*{writer}" readonly>
						</div>
						
						<div>
							
						</div>
						
						<div th:if="*{userId eq #authentication.principal.id}">
							<div>
								<a th:href="@{/novel/modify/{id}(id=${novel.id})}">작품 수정</a>
							</div>
							<div>
								<a th:href="@{/novel/{id}/episode/create(id=${id})}">회차 작성</a>
							</div>
						</div>
						
					</div>
					
					<!------ 회차 리스트 ------->
					<div id="episodeListContainer" class="col-lg-8 card">
					    <th:block th:replace="~{episode/listOfNovelDetails :: episodeListOfNovelDetails}"></th:block>
					</div>
					
					<!-- 좋아요 별점 버튼들 -->
					<div class="btnLikeWithRating mt-2">
						<div>
							<button id="btnLike" th:data-novel-id="*{id}" th:data-user-id="${#authentication.principal != null ? #authentication.principal.id : 0}" 
								class="btn btn-outline-danger bi bi-heart-fill">
								<span id="likeCount" th:text="*{likeCount}"></span>
							</button>
						</div>
						<div>
							<button id="openRatingBtn" class="btn btn-outline-warning bi bi-star-fill f">
								<span id="pating">별점주기 평균넣기</span>
							</button>
						</div>
						
						<div id="ratingModal" class="modal">
							<div class="modal-content">
							<span class="close">&times;</span>
							<div>
								<span class="star" data-value="1">⭐</span>
								<span class="star" data-value="2">⭐</span>
								<span class="star" data-value="3">⭐</span>
								<span class="star" data-value="4">⭐</span>
								<span class="star" data-value="5">⭐</span>
							</div>
							<h3>별을 클릭하세요</h3>
							<input type="submit" id="btnRating" class="btn btn-success form-control btnRating" value="확인" />							
							</div>
						</div>
					</div>
					
					<!-- 댓글 기능 -->
					<div>
						<div>
							<label class="form-label" for="intro">댓글</label>
							<textarea class="form-control" rows="5" name="intro"></textarea>
						</div>
					</div>
				</div>
			</div>
			<input type = "hidden" id = "novelId" th:value = "${novel.id}">
		</main>
		
        <th:block th:replace="~{/layout/fragments :: bootstrapJS}"></th:block>
        <th:block th:replace="~{/layout/fragments :: axiosJS}"></th:block>
        <script th:src="@{/js/episode-listOfNovelDetails.js}"></script>
	</body>
	<script th:src="@{/js/novel-details.js}"></script>
	<script th:src="@{/js/episode-listOfNovelDetails.js}"></script>
</html>
